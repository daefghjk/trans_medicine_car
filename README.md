# 流程
## 基础  
1、小车1上电，摄像头识别初始数字，进入巡线模式，小车1等待药品放入后启动，到达近端病房，等待药品卸载后给摄像头发‘m’，开始返程  
2、同1  
  
## 拓展  
1、小车1上电，摄像头识别初始数字，进入巡线模式，小车1等待药品放入后启动，到达中端病房，检测小车2，等待摄像头发送中端信息‘m‘，小车1判断拓展第几题，发送给小车2；小车2收到后等待药品放入，放入后，且摄像头识别到数字转为巡线模式，开始启动，到1号病房，到了之后点亮黄色LED，发送给小车1，小车1收到信息而且药品卸载后启动返程，发送给小车2熄灭黄色LED，回到药房后发送给小车2，小车2收到后发给摄像头‘m’，走到目标病房。  
  
2、小车1上电，摄像头识别初始数字，进入巡线模式，小车1等待药品放入后启动，到达远端病房，检测小车2，等待摄像头发送远端信息‘f’，小车1判断拓展第几题，发送给小车2；小车2收到后，等待小车1的启动信息，小车1卸载药品后发给摄像头‘m’，开始返程，并发给小车2启动信息，小车2启动，到1号病房等待小车1的启动信息，等到小车1回到药房，发送给小车2启动信息，小车2收到后发给摄像头‘m’，启动到目标病房，亮红色。  
  
拓展1与2的主要差别在：  
1、拓展1小车1需要在小车2到达1号病房后才启动，拓展2小车1不需要等待小车2。  
2、拓展1小车2在小车1未卸载药品就启动，拓展2小车需要等待小车1开始返程才启动。  
  
# K230与小车1与小车2之间的通信协议
K230与小车数据包格式：0xFF、标志位、数据、0xFE  
标志位意义：  
0x00：发送路口方向，此时数据即命令，见下表  
0x01：发送巡线偏移角度，此时数据为字符串形式的浮点数  
0x02：发送到达中端还是远端病房，此时数据即命令，见下表  
  
小车之间数据包格式：0xFF、命令、0xFE  
  
| 方向 | 内容 |
| ---- | ---- |
|车->K230| 0x00 'm' 开启巡线模式|
|K230->车| 0x00 's' 停止电机<br>0x00 'f' 启动电机路口直行<br>0x00 'l' 路口左转<br>0x00 'r' 路口右转<br>0x00 'b' 到达病房<br>0x00 'y' 到达药房<br>0x02 'm' 到达中端病房<br>0x02 'f' 到达远端病|
|小车1->小车2|'1' 目前是拓展1<br>'2' 目前是拓展2<br>'t' 测试是否有小车2<br>'f' 小车2启动<br>'n' 小车2熄灭黄色LED|
|小车2->小车1|'r' 回传确认存在小车2<br>'b' 拓展1确认小车2到达1号病房

